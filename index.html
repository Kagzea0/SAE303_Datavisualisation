<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart JS</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>  
    <!-- Image de fond et animation du train -->
    <div id="DecorEtTrain">
        <img src="Images/Décor.svg" alt="Background Image" id="bgImage" class="imgDecor">
        <div class="image-container">
            <img src="Images/Train.png" alt="Image à animer" id="train">
        </div>
        <img src="Images/Rail.svg" alt="Rails du train" id="rail">

        <img src="Images/Arbre1.svg" alt="arbre1" id="arbre1" class="imgDecor">
        <img src="Images/Arbre2.svg" alt="arbre2" id="arbre2" class="imgDecor">
        <img src="Images/Arbre3.svg" alt="arbre3" id="arbre3" class="imgDecor">
        <img src="Images/Colline1.svg" alt="colline1" id="colline1" class="imgDecor">
    </div>

    <nav>
        <ul>
            <!-- <li><a href="#bbb">Mouvements sociaux</a></li> -->
            <li><a href="#MvtSoc">Mouvements sociaux</a></li>
            <li><a href="#JourRepos">Jour de repos</a></li>
            <li><a href="#TTA">Temps de travail</a></li>
            <li><a href="#Statistique">Statistiques</a></li>
            <li><a href="#Infographie">Infographie</a></li>
        </ul>
    </nav>

    <section id="MvtSoc">
        <div id="FondMvtSoc"></div>
        <div id="DivCanMvtSoc">
            <div id="canvasContainer">
                <!-- Canvas des investissements -->
                <canvas id="MvtAnnuels" aria-label="chart" role="img"></canvas>
                <!-- Titre du canvas -->
                <div id="textMvtSoc"></div>
            </div>
            <!-- Canvas des collisions -->
            <canvas id="MvtMensuels" aria-label="chart" role="img"></canvas>
        </div>
        <!-- Boutons pour changer le graphique (graphique annuel ou mensuel et de base ou croissant) -->
        <div id="DivButMvtSoc">
            <p id="DivButMvtSocP1">Choisir votre type de données</p>
            <!-- but1 = mensuels -->
            <button id="butMensuels">Mensuellement</button>
            <!-- but2 = annuels -->
            <button id="butAnnuels">Annuellement</button>

            <h2>Temps de travail entre un <br> fonctionnaire et un salarié SNCF</h2>
            <p id="DivButMvtSocP2">Ces jeux de données fournissent une analyse détaillée des journées perdues en raison 
                des mouvements sociaux et ceci à échelle mensuel et annuel. Les graphiques illustrant ces données permettent 
                de comprendre l'impact économique et social liés à ces incidents.</p>
                
        </div>
    </section>    

    <section id="JourRepos">
        <div id="FondJourRepos"></div>
        <div id="textJourRepos">Nombre de dimanches posés par an dont le métier est :</div>

        <!-- Canvas avec un seul type de métier -->
        <canvas id="Cadre" aria-label="chart" role="img"></canvas>
        <canvas id="Execution" aria-label="chart" role="img"></canvas>
        <canvas id="Maitrise" aria-label="chart" role="img"></canvas>

        <!-- Canvas avec deux types de métiers -->
        <canvas id="CadreMaitrise" aria-label="chart" role="img"></canvas>
        <canvas id="CadreExecution" aria-label="chart" role="img"></canvas>
        <canvas id="MaitriseExecution" aria-label="chart" role="img"></canvas>

        <!-- Canvas avec trois types de métiers -->
        <canvas id="CadreMaitriseExecution" aria-label="chart" role="img"></canvas>

        <div id="ZoneTexteJourRepos">
            <h2>Métier(s) apparaissant(s) :</h2>
            <div id="ButsJourRepos"><br>
                <!-- Checkbox pour choisir entre les types de métiers -->
                <label id="labelButCadre">
                    <input type="checkbox" id="butCadre" onchange="updateCanvas()"><label>Cadre</label>
                    <span id="spanButCadre"></span>
                </label><br><br>

                <label id="labelButExecution">
                    <input type="checkbox" id="butExecution" onchange="updateCanvas()"><label>Exécution</label> 
                    <span id="spanButExecution"></span>
                </label><br><br>

                <label id="labelButMaitrise">
                    <input type="checkbox" id="butMaitrise" onchange="updateCanvas()"><label>Maîtrise</label>
                    <span id="spanButMaitrise"></span>
                </label>
            </div>
        </div>
    </section>

    <section id="TTA">
        <div id="FondTTA"></div>
        <canvas id="TempsTravailAnnuel" aria-label="chart" role="img"></canvas>
        <!-- Titre du canvas -->
        <div id="textTTA">Temps de travail annuel entre un fonctionnaire et un salarié à la SNCF</div>
        
        <div id="ZoneTextTTA">
            <h2>Journées perdues liées <br> aux mouvements sociaux</h2><br>
            <p>Ces jeux de données exposent la comparaison du temps de travail annuel entre un fonctionnaire et un employé de la SNCF. 
                Ces graphiques permettent d'évaluer les charges de travail de chacun, mais surtout d'exposer une grande inégalité entre ces deux entreprises.</p>
        </div>
    </section>

    <section id="Statistique">
        <div id="FondStatistique"></div>
        <!-- <p>Statistique</p> -->
        <!-- Mettre l'image des statistiques -->
    </section>

    <section id="Infographie">
        <div id="FondInfographie"></div>
        <img src="Images/Infographie.png" alt="Infographie" id="ImgInfographie">
        <div id="ZoneTextInfog">
            <h2>Infographie</h2>
            <p></p>
        </div>
    </section>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var butMensuels = document.getElementById('butMensuels');
            var butAnnuels = document.getElementById('butAnnuels');
            
            var canvasAnnuels = document.getElementById('MvtAnnuels');
            var canvasMensuels = document.getElementById('MvtMensuels');
    
            butAnnuels.addEventListener('click', function () {
                canvasMensuels.style.display = 'none';
                canvasAnnuels.style.display = 'block';
            });
    
            butMensuels.addEventListener('click', function () {
                canvasAnnuels.style.display = 'none';
                canvasMensuels.style.display = 'block';
            });
        });
    </script>

    <script>
        window.onload = function() {
            uncheckAllCheckboxes();
            document.getElementById('butCadre').checked = true;
            updateCanvas();
        };
    
        function uncheckAllCheckboxes() {
            var checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = false;
            });
        }
    
        function updateCanvas() {
            var cadreChecked = document.getElementById('butCadre').checked;
            var executionChecked = document.getElementById('butExecution').checked;
            var maitriseChecked = document.getElementById('butMaitrise').checked;
    
            var canvasList = ["Cadre", "Execution", "Maitrise", "CadreMaitrise", "CadreExecution", "MaitriseExecution", "CadreMaitriseExecution"];
            canvasList.forEach(function(id) {
                document.getElementById(id).style.display = 'none';
            });

            // L'affichage des canvas en fonctions des checkboxs validés commence ici
    
            if (cadreChecked && executionChecked && maitriseChecked) {
                document.getElementById('CadreMaitriseExecution').style.display = 'block';
            } 
            else if (cadreChecked && executionChecked) {
                document.getElementById('CadreExecution').style.display = 'block';
            } 
            else if (cadreChecked && maitriseChecked) {
                document.getElementById('CadreMaitrise').style.display = 'block';
            }
            else if (executionChecked && maitriseChecked) {
                document.getElementById('MaitriseExecution').style.display = 'block';
            }
            else if (cadreChecked) {
                document.getElementById('Cadre').style.display = 'block'; //Fait
            }
            else if (executionChecked) {
                document.getElementById('Execution').style.display = 'block'; //Fait
            }
            else if (maitriseChecked) {
                document.getElementById('Maitrise').style.display = 'block'; //Fait
            }          
        }
    </script>
    
    <!-- APPEL DES FICHIERS JAVASCRIPT -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="apparitionsCanvas.js"></script>
      
</body>
</html> 